{"ast":null,"code":"import absFloor from '../utils/abs-floor';\nvar abs = Math.abs;\n\nfunction sign(x) {\n  return (x > 0) - (x < 0) || +x;\n}\n\nexport function toISOString() {\n  // for ISO strings we do not use the normal bubbling rules:\n  //  * milliseconds bubble up until they become hours\n  //  * days do not bubble at all\n  //  * months bubble up until they become years\n  // This is because there is no context-free conversion between hours and days\n  // (think of clock changes)\n  // and also not between days and months (28-31 days per month)\n  if (!this.isValid()) {\n    return this.localeData().invalidDate();\n  }\n\n  var seconds = abs(this._milliseconds) / 1000,\n      days = abs(this._days),\n      months = abs(this._months),\n      minutes,\n      hours,\n      years,\n      s,\n      total = this.asSeconds(),\n      totalSign,\n      ymSign,\n      daysSign,\n      hmsSign;\n\n  if (!total) {\n    // this is the same as C#'s (Noda) and python (isodate)...\n    // but not other JS (goog.date)\n    return 'P0D';\n  } // 3600 seconds -> 60 minutes -> 1 hour\n\n\n  minutes = absFloor(seconds / 60);\n  hours = absFloor(minutes / 60);\n  seconds %= 60;\n  minutes %= 60; // 12 months -> 1 year\n\n  years = absFloor(months / 12);\n  months %= 12; // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\n\n  s = seconds ? seconds.toFixed(3).replace(/\\.?0+$/, '') : '';\n  totalSign = total < 0 ? '-' : '';\n  ymSign = sign(this._months) !== sign(total) ? '-' : '';\n  daysSign = sign(this._days) !== sign(total) ? '-' : '';\n  hmsSign = sign(this._milliseconds) !== sign(total) ? '-' : '';\n  return totalSign + 'P' + (years ? ymSign + years + 'Y' : '') + (months ? ymSign + months + 'M' : '') + (days ? daysSign + days + 'D' : '') + (hours || minutes || seconds ? 'T' : '') + (hours ? hmsSign + hours + 'H' : '') + (minutes ? hmsSign + minutes + 'M' : '') + (seconds ? hmsSign + s + 'S' : '');\n}","map":{"version":3,"names":["absFloor","abs","Math","sign","x","toISOString","isValid","localeData","invalidDate","seconds","_milliseconds","days","_days","months","_months","minutes","hours","years","s","total","asSeconds","totalSign","ymSign","daysSign","hmsSign","toFixed","replace"],"sources":["/Users/soorena/projects/shared-theme/node_modules/moment/src/lib/duration/iso-string.js"],"sourcesContent":["import absFloor from '../utils/abs-floor';\nvar abs = Math.abs;\n\nfunction sign(x) {\n    return (x > 0) - (x < 0) || +x;\n}\n\nexport function toISOString() {\n    // for ISO strings we do not use the normal bubbling rules:\n    //  * milliseconds bubble up until they become hours\n    //  * days do not bubble at all\n    //  * months bubble up until they become years\n    // This is because there is no context-free conversion between hours and days\n    // (think of clock changes)\n    // and also not between days and months (28-31 days per month)\n    if (!this.isValid()) {\n        return this.localeData().invalidDate();\n    }\n\n    var seconds = abs(this._milliseconds) / 1000,\n        days = abs(this._days),\n        months = abs(this._months),\n        minutes,\n        hours,\n        years,\n        s,\n        total = this.asSeconds(),\n        totalSign,\n        ymSign,\n        daysSign,\n        hmsSign;\n\n    if (!total) {\n        // this is the same as C#'s (Noda) and python (isodate)...\n        // but not other JS (goog.date)\n        return 'P0D';\n    }\n\n    // 3600 seconds -> 60 minutes -> 1 hour\n    minutes = absFloor(seconds / 60);\n    hours = absFloor(minutes / 60);\n    seconds %= 60;\n    minutes %= 60;\n\n    // 12 months -> 1 year\n    years = absFloor(months / 12);\n    months %= 12;\n\n    // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\n    s = seconds ? seconds.toFixed(3).replace(/\\.?0+$/, '') : '';\n\n    totalSign = total < 0 ? '-' : '';\n    ymSign = sign(this._months) !== sign(total) ? '-' : '';\n    daysSign = sign(this._days) !== sign(total) ? '-' : '';\n    hmsSign = sign(this._milliseconds) !== sign(total) ? '-' : '';\n\n    return (\n        totalSign +\n        'P' +\n        (years ? ymSign + years + 'Y' : '') +\n        (months ? ymSign + months + 'M' : '') +\n        (days ? daysSign + days + 'D' : '') +\n        (hours || minutes || seconds ? 'T' : '') +\n        (hours ? hmsSign + hours + 'H' : '') +\n        (minutes ? hmsSign + minutes + 'M' : '') +\n        (seconds ? hmsSign + s + 'S' : '')\n    );\n}\n"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,oBAArB;AACA,IAAIC,GAAG,GAAGC,IAAI,CAACD,GAAf;;AAEA,SAASE,IAAT,CAAcC,CAAd,EAAiB;EACb,OAAO,CAACA,CAAC,GAAG,CAAL,KAAWA,CAAC,GAAG,CAAf,KAAqB,CAACA,CAA7B;AACH;;AAED,OAAO,SAASC,WAAT,GAAuB;EAC1B;EACA;EACA;EACA;EACA;EACA;EACA;EACA,IAAI,CAAC,KAAKC,OAAL,EAAL,EAAqB;IACjB,OAAO,KAAKC,UAAL,GAAkBC,WAAlB,EAAP;EACH;;EAED,IAAIC,OAAO,GAAGR,GAAG,CAAC,KAAKS,aAAN,CAAH,GAA0B,IAAxC;EAAA,IACIC,IAAI,GAAGV,GAAG,CAAC,KAAKW,KAAN,CADd;EAAA,IAEIC,MAAM,GAAGZ,GAAG,CAAC,KAAKa,OAAN,CAFhB;EAAA,IAGIC,OAHJ;EAAA,IAIIC,KAJJ;EAAA,IAKIC,KALJ;EAAA,IAMIC,CANJ;EAAA,IAOIC,KAAK,GAAG,KAAKC,SAAL,EAPZ;EAAA,IAQIC,SARJ;EAAA,IASIC,MATJ;EAAA,IAUIC,QAVJ;EAAA,IAWIC,OAXJ;;EAaA,IAAI,CAACL,KAAL,EAAY;IACR;IACA;IACA,OAAO,KAAP;EACH,CA7ByB,CA+B1B;;;EACAJ,OAAO,GAAGf,QAAQ,CAACS,OAAO,GAAG,EAAX,CAAlB;EACAO,KAAK,GAAGhB,QAAQ,CAACe,OAAO,GAAG,EAAX,CAAhB;EACAN,OAAO,IAAI,EAAX;EACAM,OAAO,IAAI,EAAX,CAnC0B,CAqC1B;;EACAE,KAAK,GAAGjB,QAAQ,CAACa,MAAM,GAAG,EAAV,CAAhB;EACAA,MAAM,IAAI,EAAV,CAvC0B,CAyC1B;;EACAK,CAAC,GAAGT,OAAO,GAAGA,OAAO,CAACgB,OAAR,CAAgB,CAAhB,EAAmBC,OAAnB,CAA2B,QAA3B,EAAqC,EAArC,CAAH,GAA8C,EAAzD;EAEAL,SAAS,GAAGF,KAAK,GAAG,CAAR,GAAY,GAAZ,GAAkB,EAA9B;EACAG,MAAM,GAAGnB,IAAI,CAAC,KAAKW,OAAN,CAAJ,KAAuBX,IAAI,CAACgB,KAAD,CAA3B,GAAqC,GAArC,GAA2C,EAApD;EACAI,QAAQ,GAAGpB,IAAI,CAAC,KAAKS,KAAN,CAAJ,KAAqBT,IAAI,CAACgB,KAAD,CAAzB,GAAmC,GAAnC,GAAyC,EAApD;EACAK,OAAO,GAAGrB,IAAI,CAAC,KAAKO,aAAN,CAAJ,KAA6BP,IAAI,CAACgB,KAAD,CAAjC,GAA2C,GAA3C,GAAiD,EAA3D;EAEA,OACIE,SAAS,GACT,GADA,IAECJ,KAAK,GAAGK,MAAM,GAAGL,KAAT,GAAiB,GAApB,GAA0B,EAFhC,KAGCJ,MAAM,GAAGS,MAAM,GAAGT,MAAT,GAAkB,GAArB,GAA2B,EAHlC,KAICF,IAAI,GAAGY,QAAQ,GAAGZ,IAAX,GAAkB,GAArB,GAA2B,EAJhC,KAKCK,KAAK,IAAID,OAAT,IAAoBN,OAApB,GAA8B,GAA9B,GAAoC,EALrC,KAMCO,KAAK,GAAGQ,OAAO,GAAGR,KAAV,GAAkB,GAArB,GAA2B,EANjC,KAOCD,OAAO,GAAGS,OAAO,GAAGT,OAAV,GAAoB,GAAvB,GAA6B,EAPrC,KAQCN,OAAO,GAAGe,OAAO,GAAGN,CAAV,GAAc,GAAjB,GAAuB,EAR/B,CADJ;AAWH"},"metadata":{},"sourceType":"module"}