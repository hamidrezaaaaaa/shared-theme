{"ast":null,"code":"import { Duration, isDuration } from './constructor';\nimport isNumber from '../utils/is-number';\nimport toInt from '../utils/to-int';\nimport absRound from '../utils/abs-round';\nimport hasOwnProp from '../utils/has-own-prop';\nimport { DATE, HOUR, MINUTE, SECOND, MILLISECOND } from '../units/constants';\nimport { cloneWithOffset } from '../units/offset';\nimport { createLocal } from '../create/local';\nimport { createInvalid as invalid } from './valid'; // ASP.NET json date format regex\n\nvar aspNetRegex = /^(-|\\+)?(?:(\\d*)[. ])?(\\d+):(\\d+)(?::(\\d+)(\\.\\d*)?)?$/,\n    // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html\n// somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere\n// and further modified to allow for strings containing both week and day\nisoRegex = /^(-|\\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;\nexport function createDuration(input, key) {\n  var duration = input,\n      // matching against regexp is expensive, do it on demand\n  match = null,\n      sign,\n      ret,\n      diffRes;\n\n  if (isDuration(input)) {\n    duration = {\n      ms: input._milliseconds,\n      d: input._days,\n      M: input._months\n    };\n  } else if (isNumber(input) || !isNaN(+input)) {\n    duration = {};\n\n    if (key) {\n      duration[key] = +input;\n    } else {\n      duration.milliseconds = +input;\n    }\n  } else if (match = aspNetRegex.exec(input)) {\n    sign = match[1] === '-' ? -1 : 1;\n    duration = {\n      y: 0,\n      d: toInt(match[DATE]) * sign,\n      h: toInt(match[HOUR]) * sign,\n      m: toInt(match[MINUTE]) * sign,\n      s: toInt(match[SECOND]) * sign,\n      ms: toInt(absRound(match[MILLISECOND] * 1000)) * sign // the millisecond decimal point is included in the match\n\n    };\n  } else if (match = isoRegex.exec(input)) {\n    sign = match[1] === '-' ? -1 : 1;\n    duration = {\n      y: parseIso(match[2], sign),\n      M: parseIso(match[3], sign),\n      w: parseIso(match[4], sign),\n      d: parseIso(match[5], sign),\n      h: parseIso(match[6], sign),\n      m: parseIso(match[7], sign),\n      s: parseIso(match[8], sign)\n    };\n  } else if (duration == null) {\n    // checks for null or undefined\n    duration = {};\n  } else if (typeof duration === 'object' && ('from' in duration || 'to' in duration)) {\n    diffRes = momentsDifference(createLocal(duration.from), createLocal(duration.to));\n    duration = {};\n    duration.ms = diffRes.milliseconds;\n    duration.M = diffRes.months;\n  }\n\n  ret = new Duration(duration);\n\n  if (isDuration(input) && hasOwnProp(input, '_locale')) {\n    ret._locale = input._locale;\n  }\n\n  if (isDuration(input) && hasOwnProp(input, '_isValid')) {\n    ret._isValid = input._isValid;\n  }\n\n  return ret;\n}\ncreateDuration.fn = Duration.prototype;\ncreateDuration.invalid = invalid;\n\nfunction parseIso(inp, sign) {\n  // We'd normally use ~~inp for this, but unfortunately it also\n  // converts floats to ints.\n  // inp may be undefined, so careful calling replace on it.\n  var res = inp && parseFloat(inp.replace(',', '.')); // apply sign while we're at it\n\n  return (isNaN(res) ? 0 : res) * sign;\n}\n\nfunction positiveMomentsDifference(base, other) {\n  var res = {};\n  res.months = other.month() - base.month() + (other.year() - base.year()) * 12;\n\n  if (base.clone().add(res.months, 'M').isAfter(other)) {\n    --res.months;\n  }\n\n  res.milliseconds = +other - +base.clone().add(res.months, 'M');\n  return res;\n}\n\nfunction momentsDifference(base, other) {\n  var res;\n\n  if (!(base.isValid() && other.isValid())) {\n    return {\n      milliseconds: 0,\n      months: 0\n    };\n  }\n\n  other = cloneWithOffset(other, base);\n\n  if (base.isBefore(other)) {\n    res = positiveMomentsDifference(base, other);\n  } else {\n    res = positiveMomentsDifference(other, base);\n    res.milliseconds = -res.milliseconds;\n    res.months = -res.months;\n  }\n\n  return res;\n}","map":{"version":3,"names":["Duration","isDuration","isNumber","toInt","absRound","hasOwnProp","DATE","HOUR","MINUTE","SECOND","MILLISECOND","cloneWithOffset","createLocal","createInvalid","invalid","aspNetRegex","isoRegex","createDuration","input","key","duration","match","sign","ret","diffRes","ms","_milliseconds","d","_days","M","_months","isNaN","milliseconds","exec","y","h","m","s","parseIso","w","momentsDifference","from","to","months","_locale","_isValid","fn","prototype","inp","res","parseFloat","replace","positiveMomentsDifference","base","other","month","year","clone","add","isAfter","isValid","isBefore"],"sources":["/Users/soorena/projects/shared-theme/node_modules/moment/src/lib/duration/create.js"],"sourcesContent":["import { Duration, isDuration } from './constructor';\nimport isNumber from '../utils/is-number';\nimport toInt from '../utils/to-int';\nimport absRound from '../utils/abs-round';\nimport hasOwnProp from '../utils/has-own-prop';\nimport { DATE, HOUR, MINUTE, SECOND, MILLISECOND } from '../units/constants';\nimport { cloneWithOffset } from '../units/offset';\nimport { createLocal } from '../create/local';\nimport { createInvalid as invalid } from './valid';\n\n// ASP.NET json date format regex\nvar aspNetRegex = /^(-|\\+)?(?:(\\d*)[. ])?(\\d+):(\\d+)(?::(\\d+)(\\.\\d*)?)?$/,\n    // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html\n    // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere\n    // and further modified to allow for strings containing both week and day\n    isoRegex =\n        /^(-|\\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;\n\nexport function createDuration(input, key) {\n    var duration = input,\n        // matching against regexp is expensive, do it on demand\n        match = null,\n        sign,\n        ret,\n        diffRes;\n\n    if (isDuration(input)) {\n        duration = {\n            ms: input._milliseconds,\n            d: input._days,\n            M: input._months,\n        };\n    } else if (isNumber(input) || !isNaN(+input)) {\n        duration = {};\n        if (key) {\n            duration[key] = +input;\n        } else {\n            duration.milliseconds = +input;\n        }\n    } else if ((match = aspNetRegex.exec(input))) {\n        sign = match[1] === '-' ? -1 : 1;\n        duration = {\n            y: 0,\n            d: toInt(match[DATE]) * sign,\n            h: toInt(match[HOUR]) * sign,\n            m: toInt(match[MINUTE]) * sign,\n            s: toInt(match[SECOND]) * sign,\n            ms: toInt(absRound(match[MILLISECOND] * 1000)) * sign, // the millisecond decimal point is included in the match\n        };\n    } else if ((match = isoRegex.exec(input))) {\n        sign = match[1] === '-' ? -1 : 1;\n        duration = {\n            y: parseIso(match[2], sign),\n            M: parseIso(match[3], sign),\n            w: parseIso(match[4], sign),\n            d: parseIso(match[5], sign),\n            h: parseIso(match[6], sign),\n            m: parseIso(match[7], sign),\n            s: parseIso(match[8], sign),\n        };\n    } else if (duration == null) {\n        // checks for null or undefined\n        duration = {};\n    } else if (\n        typeof duration === 'object' &&\n        ('from' in duration || 'to' in duration)\n    ) {\n        diffRes = momentsDifference(\n            createLocal(duration.from),\n            createLocal(duration.to)\n        );\n\n        duration = {};\n        duration.ms = diffRes.milliseconds;\n        duration.M = diffRes.months;\n    }\n\n    ret = new Duration(duration);\n\n    if (isDuration(input) && hasOwnProp(input, '_locale')) {\n        ret._locale = input._locale;\n    }\n\n    if (isDuration(input) && hasOwnProp(input, '_isValid')) {\n        ret._isValid = input._isValid;\n    }\n\n    return ret;\n}\n\ncreateDuration.fn = Duration.prototype;\ncreateDuration.invalid = invalid;\n\nfunction parseIso(inp, sign) {\n    // We'd normally use ~~inp for this, but unfortunately it also\n    // converts floats to ints.\n    // inp may be undefined, so careful calling replace on it.\n    var res = inp && parseFloat(inp.replace(',', '.'));\n    // apply sign while we're at it\n    return (isNaN(res) ? 0 : res) * sign;\n}\n\nfunction positiveMomentsDifference(base, other) {\n    var res = {};\n\n    res.months =\n        other.month() - base.month() + (other.year() - base.year()) * 12;\n    if (base.clone().add(res.months, 'M').isAfter(other)) {\n        --res.months;\n    }\n\n    res.milliseconds = +other - +base.clone().add(res.months, 'M');\n\n    return res;\n}\n\nfunction momentsDifference(base, other) {\n    var res;\n    if (!(base.isValid() && other.isValid())) {\n        return { milliseconds: 0, months: 0 };\n    }\n\n    other = cloneWithOffset(other, base);\n    if (base.isBefore(other)) {\n        res = positiveMomentsDifference(base, other);\n    } else {\n        res = positiveMomentsDifference(other, base);\n        res.milliseconds = -res.milliseconds;\n        res.months = -res.months;\n    }\n\n    return res;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}