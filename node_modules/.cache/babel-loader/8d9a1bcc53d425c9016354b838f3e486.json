{"ast":null,"code":"import { daysInYear } from './year';\nimport { createUTCDate } from '../create/date-from-array'; // start-of-first-week - start-of-year\n\nfunction firstWeekOffset(year, dow, doy) {\n  var // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n  fwd = 7 + dow - doy,\n      // first-week day local weekday -- which local weekday is fwd\n  fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;\n  return -fwdlw + fwd - 1;\n} // https://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\n\n\nexport function dayOfYearFromWeeks(year, week, weekday, dow, doy) {\n  var localWeekday = (7 + weekday - dow) % 7,\n      weekOffset = firstWeekOffset(year, dow, doy),\n      dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,\n      resYear,\n      resDayOfYear;\n\n  if (dayOfYear <= 0) {\n    resYear = year - 1;\n    resDayOfYear = daysInYear(resYear) + dayOfYear;\n  } else if (dayOfYear > daysInYear(year)) {\n    resYear = year + 1;\n    resDayOfYear = dayOfYear - daysInYear(year);\n  } else {\n    resYear = year;\n    resDayOfYear = dayOfYear;\n  }\n\n  return {\n    year: resYear,\n    dayOfYear: resDayOfYear\n  };\n}\nexport function weekOfYear(mom, dow, doy) {\n  var weekOffset = firstWeekOffset(mom.year(), dow, doy),\n      week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,\n      resWeek,\n      resYear;\n\n  if (week < 1) {\n    resYear = mom.year() - 1;\n    resWeek = week + weeksInYear(resYear, dow, doy);\n  } else if (week > weeksInYear(mom.year(), dow, doy)) {\n    resWeek = week - weeksInYear(mom.year(), dow, doy);\n    resYear = mom.year() + 1;\n  } else {\n    resYear = mom.year();\n    resWeek = week;\n  }\n\n  return {\n    week: resWeek,\n    year: resYear\n  };\n}\nexport function weeksInYear(year, dow, doy) {\n  var weekOffset = firstWeekOffset(year, dow, doy),\n      weekOffsetNext = firstWeekOffset(year + 1, dow, doy);\n  return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;\n}","map":{"version":3,"names":["daysInYear","createUTCDate","firstWeekOffset","year","dow","doy","fwd","fwdlw","getUTCDay","dayOfYearFromWeeks","week","weekday","localWeekday","weekOffset","dayOfYear","resYear","resDayOfYear","weekOfYear","mom","Math","floor","resWeek","weeksInYear","weekOffsetNext"],"sources":["/Users/soorena/projects/shared-theme/node_modules/moment/src/lib/units/week-calendar-utils.js"],"sourcesContent":["import { daysInYear } from './year';\nimport { createUTCDate } from '../create/date-from-array';\n\n// start-of-first-week - start-of-year\nfunction firstWeekOffset(year, dow, doy) {\n    var // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n        fwd = 7 + dow - doy,\n        // first-week day local weekday -- which local weekday is fwd\n        fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;\n\n    return -fwdlw + fwd - 1;\n}\n\n// https://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\nexport function dayOfYearFromWeeks(year, week, weekday, dow, doy) {\n    var localWeekday = (7 + weekday - dow) % 7,\n        weekOffset = firstWeekOffset(year, dow, doy),\n        dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,\n        resYear,\n        resDayOfYear;\n\n    if (dayOfYear <= 0) {\n        resYear = year - 1;\n        resDayOfYear = daysInYear(resYear) + dayOfYear;\n    } else if (dayOfYear > daysInYear(year)) {\n        resYear = year + 1;\n        resDayOfYear = dayOfYear - daysInYear(year);\n    } else {\n        resYear = year;\n        resDayOfYear = dayOfYear;\n    }\n\n    return {\n        year: resYear,\n        dayOfYear: resDayOfYear,\n    };\n}\n\nexport function weekOfYear(mom, dow, doy) {\n    var weekOffset = firstWeekOffset(mom.year(), dow, doy),\n        week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,\n        resWeek,\n        resYear;\n\n    if (week < 1) {\n        resYear = mom.year() - 1;\n        resWeek = week + weeksInYear(resYear, dow, doy);\n    } else if (week > weeksInYear(mom.year(), dow, doy)) {\n        resWeek = week - weeksInYear(mom.year(), dow, doy);\n        resYear = mom.year() + 1;\n    } else {\n        resYear = mom.year();\n        resWeek = week;\n    }\n\n    return {\n        week: resWeek,\n        year: resYear,\n    };\n}\n\nexport function weeksInYear(year, dow, doy) {\n    var weekOffset = firstWeekOffset(year, dow, doy),\n        weekOffsetNext = firstWeekOffset(year + 1, dow, doy);\n    return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}